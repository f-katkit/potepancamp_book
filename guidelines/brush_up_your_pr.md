# 最高のPRをたてる

以下では、より高いレベルのPRをつくるためのいくつかのコツをあげておきます。

つねに質の高いPRを書くことができれば、仕事でもOSSの開発現場でも歓迎されるエンジニアになれます。

ここで並べた丁寧なPRをつくる技術は、そのままプロの開発現場や、OSS（含むRails!）へのコントリビュートに活かせる世界共通の考え方です。

### 意図を正しく伝えましょう

エンジニアはコード（テスト含む）から実装の意図を読み取っていきます。 **コードを読むだけでやりたいことが理解できる** という状態になっていることが理想です。

* とくに変数名・メソッド名がきちんと意図を反映した名前になっているか、テストケース名が内容を正しく反映しているか、ということに気をつけましょう。

* Rubyの命名規則があります。

その上で、伝わりきらないことは積極的にコメントに残しましょう。

* コメントはいたずらに書けばいいというものではなく、コードを読めば自明なことはコードに託して、書くべきポイントを押さえましょう。

* どのようなコメントが望ましいかは、例えば[t_wadaさんの名言](https://twitter.com/t_wada/status/904916106153828352)が参考になります。

```
コードには How
テストコードには What
コミットログには Why
コードコメントには Why not

を書こうという話をした
```

* コードコメントには「コードを読めばわかること」を書くのではなく、 **なぜこういう実装をとったのか、なぜ他の実装手段をとらなかったのか** という理由が大切です。

* コードは書いている時間より、将来にわたって読まれる時間の方が長いです。読む側のことを考えたコードを書けているか、今一度客観的な目線でコードをチェックしよう

* "[最後のチャプター](books.md)"に「リーダブルコード」という名著が紹介されていますので、そちらも一読をお勧めします。

### コミットに気をつけよう

コミットログは大切です。たとえば「決済機能作成、ユーザーモデル改修・商品画面のデザイン変更、モデルのバリデーションテストを追加」というように、いろんな改修を１コミットにまとめてしまうと、レビュアーが意図を理解しづらくなります。

* コミットログには「どういう目的で、何をどう改修したのか」を、端的にわかりやすく表現しましょう。「指摘を反映」とか「一部修正」というログは後から見て何のことかわからなくなります。

* レビュアーによってはコミットごとに積まれた内容を確認します。適切な粒度でコミットが分けられていることはそれだけで安心感の高いPRになります。

* 無関係なファイルをうっかりコミットすることがあります。コミット前・プッシュ前、PR後のタイミングで、かならず差分を確認するくせをつけましょう。

* 本番アプリに関係のないファイルを無視するために `.gitignore` をまめに更新しましょう。チームと関係ない個人的な設定ファイル（たとえばrubymineの設定ファイル）については、 `.gitignore_global` に設定することができます。

（参考）コミットをどうするか（何をどう書くべきか、日本語か英語か、１行か複数行か）は現場ごとに文化があります。OSSなど外部に出す場合は、他のコミットメッセージを参考にしつつ、お作法を守るよう留意しましょう。
